#! python3

# --------------------------------------------------------------
# Concatenate Words
# given an array of diferent words, 
# find which word is a concatenation of other words
#
# from techlead - interview problems
#  - https://www.youtube.com/watch?v=QGVCnjXmrNg
#  - https://github.com/techleadhd/three-coding-problems/blob/master/concat.py
# methods:
#   bruteforce - in loop partition each word into 2 parts, ...
#   better - use cache (memoization, dynamic programming)
# --------------------------------------------------------------

# --------------------------------------------------------------
class Solution(object):

    # -----------------------------------
    def findAllConcatenatedWords(self, words):
        wordDict = set(words)
        cache = {}
        myarr = []
        for word in words:
            if self._canForm(word, wordDict, cache):
                myarr += [word]
        return myarr
    
    # -----------------------------------
    def _canForm(self, word, wordDict, cache):
        if word in cache:
            return cache[word]
        for index in range(1, len(word)):
            prefix = word[:index]
            suffix = word[index:]
            if prefix in wordDict:
                if suffix in wordDict or self._canForm(suffix, wordDict, cache):
                    cache[word] = True
                    return True
        cache[word] = False
        return False

input = ['cat', 'cats', 'dog', 'catsdog']
print(Solution().findAllConcatenatedWords(input))
# ['catsdog']

